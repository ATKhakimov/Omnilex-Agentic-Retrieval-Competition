# Data Directory

This directory contains competition data files. Large data files and indices are git-ignored.

## Directory Structure

```
data/
├── raw/                    # Original downloaded data (git-ignored)
│   ├── lexam/              # LEXam dataset splits
│   ├── swiss_citations/    # Swiss citation dataset
│   └── samples/            # Sample data files
├── processed/              # Processed/indexed data (git-ignored)
├── sample_submission.csv   # Example submission format (tracked)
└── README.md               # This file (tracked)
```

## Git-Ignored Files

The following are excluded from version control (see `.gitignore`):

- `data/raw/` - All raw downloaded data
- `data/processed/` - All processed indices and corpora
- `*.pkl` - Pickle files (BM25 indices)
- `*.jsonl` - JSON Lines files (corpora)
- `*.parquet` - Parquet files
- `models/` and `*.gguf` - LLM model files

## Expected Data Files

After running the download and build scripts, you should have:

### Raw Data (`data/raw/`)

| File/Directory | Source | Description |
|----------------|--------|-------------|
| `lexam/` | HuggingFace | LEXam dataset splits |
| `swiss_citations/` | HuggingFace | Swiss citation dataset |
| `samples/train.csv` | Generated | Sample training data |
| `samples/test.csv` | Generated | Sample test data |

### Processed Data (`data/processed/`)

| File | Generated By | Description |
|------|--------------|-------------|
| `laws_index.pkl` | `build_indices.py` | BM25 index for federal laws |
| `courts_index.pkl` | `build_indices.py` | BM25 index for court decisions |
| `federal_laws.jsonl` | `build_indices.py` | Federal laws corpus |
| `court_decisions.jsonl` | `build_indices.py` | Court decisions corpus |

## Data Schemas

### Training Data (`train.csv`)

| Column           | Type   | Description                                  |
| ---------------- | ------ | -------------------------------------------- |
| `query_id`       | string | Unique query identifier                      |
| `query`          | string | Legal question (English)                     |
| `gold_citations` | string | Ground truth citations (semicolon-separated) |
| `language`       | string | Query language code (optional)               |

### Test Data (`test.csv`)

| Column     | Type   | Description              |
| ---------- | ------ | ------------------------ |
| `query_id` | string | Unique query identifier  |
| `query`    | string | Legal question (English) |

### Federal Laws Corpus (`federal_laws.jsonl`)

JSON Lines format, one document per line:

```json
{
  "id": "sr_220_art_1",
  "citation": "SR 220 Art. 1",
  "text": "Zum Abschlusse eines Vertrages...",
  "title": "Obligationenrecht - Abschluss des Vertrages",
  "sr_number": "220",
  "article": "1"
}
```

### Court Decisions Corpus (`court_decisions.jsonl`)

JSON Lines format:

```json
{
  "id": "bge_119_ii_449",
  "citation": "BGE 119 II 449",
  "text": "Der Vertrag kommt durch...",
  "volume": 119,
  "section": "II",
  "page": 449,
  "regeste": "Vertragsschluss, konkludentes Verhalten"
}
```

### Sample Submission (`sample_submission.csv`)

```csv
query_id,predicted_citations
test_001,"SR 210 Art. 111;SR 210 Art. 114"
test_002,"SR 210 Art. 457;SR 210 Art. 462"
```

## Setup Instructions

```bash
# 1. Download data from HuggingFace
python scripts/download_data.py

# 2. Build BM25 indices for retrieval
python scripts/build_indices.py

# Alternative: Only create sample files (no download)
python scripts/download_data.py --samples-only
```

## Data Sources

- **LEXam**: [HuggingFace Dataset](https://huggingface.co/datasets/LEXam-Benchmark/LEXam)
- **Swiss Citations**: [HuggingFace Dataset](https://huggingface.co/datasets/rcds/swiss_citation_extraction)
- **Fedlex**: [Official Portal](https://www.fedlex.admin.ch/)
